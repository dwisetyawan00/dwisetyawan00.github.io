import React, { useState, useEffect } from 'react';
import { Wallet, TrendingUp, CreditCard, ArrowRightLeft, Shield, Zap, ChevronRight, Menu, X, Send, Plus, Eye, EyeOff, Copy, Check, Sparkles, Globe, Lock, ArrowUpRight, ArrowDownLeft, Clock, Star } from 'lucide-react';

export default function TriaSimulation() {
  const [activeTab, setActiveTab] = useState('home');
  const [balance, setBalance] = useState(5247.83);
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [membership, setMembership] = useState('signature');
  const [stakeAmount, setStakeAmount] = useState('');
  const [showBalance, setShowBalance] = useState(true);
  const [copied, setCopied] = useState(false);
  const [selectedChainFrom, setSelectedChainFrom] = useState('Ethereum');
  const [selectedChainTo, setSelectedChainTo] = useState('Polygon');
  const [tradeFromAmount, setTradeFromAmount] = useState('');
  const [tradeToAmount, setTradeToAmount] = useState('');
  const [showAddFunds, setShowAddFunds] = useState(false);
  const [showSendModal, setShowSendModal] = useState(false);
  const [activeStakePool, setActiveStakePool] = useState('USDC');
  const [notifications, setNotifications] = useState([]);

  // GANTI URL LOGO ANDA DI SINI
  const logoUrl = "https://imgur.com/a/YprQQAU"; // Ganti dengan URL logo Anda
  const companyName = "Tria"; // Ganti dengan nama company Anda
  const tagline = "Neo-Banking Platform"; // Ganti tagline Anda

  // Set favicon
  useEffect(() => {
    const favicon = document.querySelector("link[rel~='icon']");
    if (favicon) {
      favicon.href = logoUrl; // Favicon akan otomatis menggunakan logoUrl
    } else {
      const newFavicon = document.createElement('link');
      newFavicon.rel = 'icon';
      newFavicon.href = logoUrl;
      document.head.appendChild(newFavicon);
    }
    
    // Set title
    document.title = `${companyName} - ${tagline}`;
  }, [logoUrl, companyName, tagline]);

  const chains = [
    { name: 'Ethereum', symbol: 'ETH', color: 'bg-blue-500', balance: 1.2453 },
    { name: 'Polygon', symbol: 'MATIC', color: 'bg-purple-500', balance: 847.32 },
    { name: 'Arbitrum', symbol: 'ARB', color: 'bg-cyan-500', balance: 234.12 },
    { name: 'Solana', symbol: 'SOL', color: 'bg-green-500', balance: 12.45 },
    { name: 'Bitcoin', symbol: 'BTC', color: 'bg-orange-500', balance: 0.0234 },
  ];

  const stakePools = [
    { name: 'USDC', apy: 15.2, risk: 'Low', tvl: '$2.4M' },
    { name: 'ETH', apy: 12.8, risk: 'Medium', tvl: '$5.1M' },
    { name: 'BTC', apy: 10.5, risk: 'Low', tvl: '$3.8M' },
    { name: 'MATIC', apy: 18.3, risk: 'High', tvl: '$1.2M' },
  ];

  const recentTransactions = [
    { type: 'receive', amount: '+$250.00', time: '2 hours ago', status: 'completed' },
    { type: 'send', amount: '-$120.50', time: '5 hours ago', status: 'completed' },
    { type: 'stake', amount: '+$15.30', time: '1 day ago', status: 'completed' },
    { type: 'trade', amount: '$500.00', time: '2 days ago', status: 'completed' },
  ];

  const addNotification = (message) => {
    const id = Date.now();
    setNotifications(prev => [...prev, { id, message }]);
    setTimeout(() => {
      setNotifications(prev => prev.filter(n => n.id !== id));
    }, 3000);
  };

  const handleCopyAddress = () => {
    setCopied(true);
    addNotification('Wallet address copied!');
    setTimeout(() => setCopied(false), 2000);
  };

  const handleStake = () => {
    if (stakeAmount && parseFloat(stakeAmount) > 0) {
      addNotification(`Successfully staked $${stakeAmount} in ${activeStakePool} pool`);
      setStakeAmount('');
    }
  };

  const handleTrade = () => {
    if (tradeFromAmount && parseFloat(tradeFromAmount) > 0) {
      addNotification(`Trade executed: ${tradeFromAmount} ${selectedChainFrom} → ${selectedChainTo}`);
      setTradeFromAmount('');
      setTradeToAmount('');
    }
  };

  const handleAddFunds = () => {
    setShowAddFunds(false);
    addNotification('Funds added successfully via bank transfer');
  };

  const handleSend = () => {
    setShowSendModal(false);
    addNotification('Transaction sent successfully');
  };

  useEffect(() => {
    if (tradeFromAmount) {
      const rate = 1234.56;
      setTradeToAmount((parseFloat(tradeFromAmount) * rate).toFixed(2));
    } else {
      setTradeToAmount('');
    }
  }, [tradeFromAmount]);

  const selectedPool = stakePools.find(p => p.name === activeStakePool);

  // Dynamic greeting based on time
  const getGreeting = () => {
    const hour = new Date().getHours();
    if (hour >= 5 && hour < 12) return 'Good morning';
    if (hour >= 12 && hour < 17) return 'Good afternoon';
    if (hour >= 17 && hour < 22) return 'Good evening';
    return 'Good night';
  };

  const getGreetingEmoji = () => {
    const hour = new Date().getHours();
    if (hour >= 5 && hour < 12) return '☀️';
    if (hour >= 12 && hour < 17) return '🌤️';
    if (hour >= 17 && hour < 22) return '🌆';
    return '🌙';
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-black text-white">
      {/* Notifications */}
      <div className="fixed top-4 right-4 z-50 space-y-2">
        {notifications.map(notif => (
          <div key={notif.id} className="bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-slide-in">
            <Check className="w-5 h-5" />
            {notif.message}
          </div>
        ))}
      </div>

      {/* Header */}
      <header className="border-b border-gray-800/50 bg-black/30 backdrop-blur-xl sticky top-0 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="relative">
                {/* Jika logoUrl ada, gunakan img, jika tidak gunakan icon default */}
                {logoUrl && logoUrl !== "https://i.imgur.com/yourlogo.png" ? (
                  <img 
                    src={logoUrl} 
                    alt={`${companyName} logo`}
                    className="w-10 h-10 rounded-xl object-cover shadow-lg"
                    onError={(e) => {
                      // Jika gambar gagal load, tampilkan icon default
                      e.target.style.display = 'none';
                      e.target.nextSibling.style.display = 'flex';
                    }}
                  />
                ) : null}
                <div className={`w-10 h-10 bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-500 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/50 ${logoUrl && logoUrl !== "https://i.imgur.com/yourlogo.png" ? 'hidden' : ''}`}>
                  <Sparkles className="w-6 h-6" />
                </div>
                <div className="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-black"></div>
              </div>
              <div>
                <span className="text-xl font-bold bg-gradient-to-r from-violet-400 to-fuchsia-400 bg-clip-text text-transparent">{companyName}</span>
                <div className="text-xs text-gray-400">{tagline}</div>
              </div>
            </div>
            
            <nav className="hidden lg:flex items-center gap-2">
              {[
                { id: 'home', label: 'Home', icon: Wallet },
                { id: 'earn', label: 'Earn', icon: TrendingUp },
                { id: 'card', label: 'Card', icon: CreditCard },
                { id: 'trade', label: 'Trade', icon: ArrowRightLeft },
              ].map(tab => {
                const Icon = tab.icon;
                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={`flex items-center gap-2 px-5 py-2.5 rounded-xl transition-all duration-200 ${
                      activeTab === tab.id
                        ? 'bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white shadow-lg shadow-purple-500/30'
                        : 'text-gray-400 hover:text-white hover:bg-gray-800/50'
                    }`}
                  >
                    <Icon className="w-4 h-4" />
                    <span className="font-medium">{tab.label}</span>
                  </button>
                );
              })}
            </nav>

            <div className="flex items-center gap-3">
              <button className="hidden md:flex items-center gap-2 px-4 py-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-xl transition">
                <Globe className="w-4 h-4" />
                <span className="text-sm">EN</span>
              </button>
              <button 
                className="lg:hidden p-2 hover:bg-gray-800/50 rounded-xl transition"
                onClick={() => setIsMenuOpen(!isMenuOpen)}
              >
                {isMenuOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
              </button>
            </div>
          </div>

          {isMenuOpen && (
            <div className="lg:hidden mt-4 pb-4 space-y-2 animate-fade-in">
              {[
                { id: 'home', label: 'Home', icon: Wallet },
                { id: 'earn', label: 'Earn', icon: TrendingUp },
                { id: 'card', label: 'Card', icon: CreditCard },
                { id: 'trade', label: 'Trade', icon: ArrowRightLeft },
              ].map(tab => {
                const Icon = tab.icon;
                return (
                  <button
                    key={tab.id}
                    onClick={() => {
                      setActiveTab(tab.id);
                      setIsMenuOpen(false);
                    }}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition ${
                      activeTab === tab.id
                        ? 'bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white'
                        : 'text-gray-400 hover:bg-gray-800/50'
                    }`}
                  >
                    <Icon className="w-5 h-5" />
                    <span className="font-medium">{tab.label}</span>
                  </button>
                );
              })}
            </div>
          )}
        </div>
      </header>

      <main className="max-w-7xl mx-auto px-4 sm:px-6 py-8 pb-24">
        {/* Home */}
        {activeTab === 'home' && (
          <div className="space-y-8">
            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl sm:text-4xl font-bold mb-2">{getGreeting()} {getGreetingEmoji()}</h1>
                <p className="text-gray-400">Here's what's happening with your assets</p>
              </div>
            </div>

            {/* Main Balance Card */}
            <div className="relative overflow-hidden bg-gradient-to-br from-violet-600 via-purple-600 to-fuchsia-600 rounded-3xl p-8 shadow-2xl shadow-purple-500/30">
              <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32"></div>
              <div className="absolute bottom-0 left-0 w-48 h-48 bg-fuchsia-500/20 rounded-full blur-3xl -ml-24 -mb-24"></div>
              
              <div className="relative">
                <div className="flex items-center justify-between mb-8">
                  <div className="flex items-center gap-3">
                    <Shield className="w-6 h-6 text-white/80" />
                    <span className="text-white/80 font-medium">Total Portfolio Value</span>
                  </div>
                  <button 
                    onClick={() => setShowBalance(!showBalance)}
                    className="p-2 hover:bg-white/10 rounded-lg transition"
                  >
                    {showBalance ? <Eye className="w-5 h-5" /> : <EyeOff className="w-5 h-5" />}
                  </button>
                </div>
                
                <div className="mb-8">
                  <div className="text-5xl sm:text-6xl font-bold mb-2">
                    {showBalance ? `$${balance.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` : '••••••'}
                  </div>
                  <div className="flex items-center gap-2 text-white/80">
                    <ArrowUpRight className="w-4 h-4" />
                    <span className="text-lg">+12.5% this month</span>
                  </div>
                </div>

                <div className="flex flex-col sm:flex-row gap-3">
                  <button 
                    onClick={() => setShowAddFunds(true)}
                    className="flex-1 flex items-center justify-center gap-2 bg-white text-purple-600 font-semibold py-4 px-6 rounded-2xl hover:bg-gray-100 transition shadow-lg"
                  >
                    <Plus className="w-5 h-5" />
                    Add Funds
                  </button>
                  <button 
                    onClick={() => setShowSendModal(true)}
                    className="flex-1 flex items-center justify-center gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold py-4 px-6 rounded-2xl hover:bg-white/30 transition"
                  >
                    <Send className="w-5 h-5" />
                    Send
                  </button>
                  <button 
                    onClick={handleCopyAddress}
                    className="flex-1 flex items-center justify-center gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold py-4 px-6 rounded-2xl hover:bg-white/30 transition"
                  >
                    {copied ? <Check className="w-5 h-5" /> : <Copy className="w-5 h-5" />}
                    {copied ? 'Copied!' : 'Receive'}
                  </button>
                </div>
              </div>
            </div>

            <div className="grid lg:grid-cols-3 gap-6">
              {/* Assets */}
              <div className="lg:col-span-2 bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-xl font-bold">Your Assets</h2>
                  <button className="text-sm text-purple-400 hover:text-purple-300 flex items-center gap-1">
                    View All <ChevronRight className="w-4 h-4" />
                  </button>
                </div>
                
                <div className="space-y-3">
                  {chains.map((chain, idx) => (
                    <div key={idx} className="flex items-center justify-between p-4 bg-gray-800/30 hover:bg-gray-800/50 rounded-xl transition cursor-pointer group">
                      <div className="flex items-center gap-4">
                        <div className={`w-12 h-12 ${chain.color} rounded-xl flex items-center justify-center font-bold text-sm shadow-lg`}>
                          {chain.symbol}
                        </div>
                        <div>
                          <div className="font-semibold group-hover:text-purple-400 transition">{chain.name}</div>
                          <div className="text-sm text-gray-400">{chain.balance} {chain.symbol}</div>
                        </div>
                      </div>
                      <div className="text-right">
                        <div className="font-semibold">${(chain.balance * 1234.56).toFixed(2)}</div>
                        <div className="text-sm text-green-400">+2.4%</div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              {/* Quick Actions & Stats */}
              <div className="space-y-6">
                <div className="bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700/50 rounded-2xl p-6">
                  <h3 className="font-semibold mb-4 flex items-center gap-2">
                    <Star className="w-5 h-5 text-yellow-400" />
                    Quick Stats
                  </h3>
                  <div className="space-y-4">
                    <div>
                      <div className="text-sm text-gray-400 mb-1">Active Earnings</div>
                      <div className="text-2xl font-bold text-green-400">$287.45</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-400 mb-1">Transactions</div>
                      <div className="text-2xl font-bold">142</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-400 mb-1">Card Spending</div>
                      <div className="text-2xl font-bold">$1,234</div>
                    </div>
                  </div>
                </div>

                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                  <h3 className="font-semibold mb-4 flex items-center gap-2">
                    <Clock className="w-5 h-5" />
                    Recent Activity
                  </h3>
                  <div className="space-y-3">
                    {recentTransactions.slice(0, 3).map((tx, idx) => (
                      <div key={idx} className="flex items-center gap-3 text-sm">
                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${
                          tx.type === 'receive' ? 'bg-green-500/20 text-green-400' :
                          tx.type === 'send' ? 'bg-red-500/20 text-red-400' :
                          tx.type === 'stake' ? 'bg-blue-500/20 text-blue-400' :
                          'bg-purple-500/20 text-purple-400'
                        }`}>
                          {tx.type === 'receive' && <ArrowDownLeft className="w-4 h-4" />}
                          {tx.type === 'send' && <ArrowUpRight className="w-4 h-4" />}
                          {tx.type === 'stake' && <TrendingUp className="w-4 h-4" />}
                          {tx.type === 'trade' && <ArrowRightLeft className="w-4 h-4" />}
                        </div>
                        <div className="flex-1">
                          <div className="font-medium capitalize">{tx.type}</div>
                          <div className="text-gray-400 text-xs">{tx.time}</div>
                        </div>
                        <div className={`font-semibold ${tx.amount.startsWith('+') ? 'text-green-400' : 'text-gray-300'}`}>
                          {tx.amount}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>

            {/* Features */}
            <div className="grid md:grid-cols-3 gap-6">
              <div className="bg-gradient-to-br from-blue-600/20 to-blue-800/20 border border-blue-500/30 rounded-2xl p-6 hover:border-blue-400/50 transition cursor-pointer group">
                <Zap className="w-10 h-10 text-blue-400 mb-4 group-hover:scale-110 transition" />
                <h3 className="text-xl font-bold mb-2">Zero Gas Fees</h3>
                <p className="text-gray-400 text-sm leading-relaxed">Execute transactions across any blockchain without worrying about gas costs</p>
              </div>
              <div className="bg-gradient-to-br from-purple-600/20 to-purple-800/20 border border-purple-500/30 rounded-2xl p-6 hover:border-purple-400/50 transition cursor-pointer group">
                <Lock className="w-10 h-10 text-purple-400 mb-4 group-hover:scale-110 transition" />
                <h3 className="text-xl font-bold mb-2">Self-Custodial</h3>
                <p className="text-gray-400 text-sm leading-relaxed">Full control over your assets with institutional-grade security standards</p>
              </div>
              <div className="bg-gradient-to-br from-green-600/20 to-green-800/20 border border-green-500/30 rounded-2xl p-6 hover:border-green-400/50 transition cursor-pointer group">
                <Globe className="w-10 h-10 text-green-400 mb-4 group-hover:scale-110 transition" />
                <h3 className="text-xl font-bold mb-2">70+ Chains</h3>
                <p className="text-gray-400 text-sm leading-relaxed">Seamless access to major blockchains including EVM, Solana, Cosmos and more</p>
              </div>
            </div>
          </div>
        )}

        {/* Earn */}
        {activeTab === 'earn' && (
          <div className="space-y-8">
            <div>
              <h1 className="text-3xl sm:text-4xl font-bold mb-2">Earn with Tria</h1>
              <p className="text-gray-400">Maximize your returns with optimized yield strategies</p>
            </div>

            {/* Membership */}
            <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
              <h2 className="text-xl font-bold mb-6">Choose Your Membership</h2>
              <div className="grid md:grid-cols-3 gap-4">
                {[
                  { type: 'virtual', name: 'Virtual', price: 'Free', features: ['Basic staking', 'Standard APY', 'Email support'] },
                  { type: 'signature', name: 'Signature', price: '$29/mo', features: ['Enhanced APY', 'Priority support', 'Advanced analytics'] },
                  { type: 'premium', name: 'Premium', price: '$99/mo', features: ['Maximum APY', '24/7 support', 'Exclusive pools', 'Premium card'] },
                ].map(tier => (
                  <button
                    key={tier.type}
                    onClick={() => setMembership(tier.type)}
                    className={`text-left p-6 rounded-xl border-2 transition-all ${
                      membership === tier.type
                        ? 'border-purple-500 bg-purple-500/10 shadow-lg shadow-purple-500/20'
                        : 'border-gray-700 hover:border-gray-600 bg-gray-800/30'
                    }`}
                  >
                    <div className="flex items-center justify-between mb-4">
                      <h3 className="text-xl font-bold">{tier.name}</h3>
                      {membership === tier.type && (
                        <div className="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center">
                          <Check className="w-4 h-4" />
                        </div>
                      )}
                    </div>
                    <div className="text-2xl font-bold mb-4 text-purple-400">{tier.price}</div>
                    <ul className="space-y-2">
                      {tier.features.map((feature, idx) => (
                        <li key={idx} className="text-sm text-gray-400 flex items-center gap-2">
                          <Check className="w-4 h-4 text-green-400" />
                          {feature}
                        </li>
                      ))}
                    </ul>
                  </button>
                ))}
              </div>
            </div>

            {/* Staking Pools */}
            <div className="grid lg:grid-cols-3 gap-6">
              <div className="lg:col-span-2 space-y-6">
                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                  <h2 className="text-xl font-bold mb-6">Available Pools</h2>
                  <div className="grid sm:grid-cols-2 gap-4">
                    {stakePools.map(pool => (
                      <button
                        key={pool.name}
                        onClick={() => setActiveStakePool(pool.name)}
                        className={`text-left p-5 rounded-xl border transition-all ${
                          activeStakePool === pool.name
                            ? 'border-green-500 bg-green-500/10'
                            : 'border-gray-700 hover:border-gray-600 bg-gray-800/30'
                        }`}
                      >
                        <div className="flex items-center justify-between mb-3">
                          <span className="text-lg font-bold">{pool.name}</span>
                          <span className={`text-xs px-2 py-1 rounded-full ${
                            pool.risk === 'Low' ? 'bg-green-500/20 text-green-400' :
                            pool.risk === 'Medium' ? 'bg-yellow-500/20 text-yellow-400' :
                            'bg-red-500/20 text-red-400'
                          }`}>
                            {pool.risk}
                          </span>
                        </div>
                        <div className="text-3xl font-bold text-green-400 mb-2">{pool.apy}%</div>
                        <div className="text-sm text-gray-400">TVL: {pool.tvl}</div>
                      </button>
                    ))}
                  </div>
                </div>

                {/* Stake Form */}
                {selectedPool && (
                  <div className="bg-gradient-to-br from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-2xl p-8">
                    <h3 className="text-2xl font-bold mb-6">Stake {selectedPool.name}</h3>
                    
                    <div className="mb-6">
                      <label className="block text-sm font-medium text-gray-300 mb-3">Amount to Stake</label>
                      <div className="relative">
                        <input
                          type="number"
                          value={stakeAmount}
                          onChange={(e) => setStakeAmount(e.target.value)}
                          className="w-full bg-gray-900/50 border border-gray-700 text-white text-xl px-6 py-4 rounded-xl outline-none focus:border-green-500 transition"
                          placeholder="0.00"
                        />
                        <button className="absolute right-3 top-1/2 -translate-y-1/2 text-sm bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-lg transition">
                          Max
                        </button>
                      </div>
                    </div>

                    {stakeAmount && parseFloat(stakeAmount) > 0 && (
                      <div className="bg-gray-900/50 border border-gray-700/50 rounded-xl p-5 mb-6 space-y-3">
                        <div className="flex justify-between text-sm">
                          <span className="text-gray-400">Expected yearly return</span>
                          <span className="font-bold text-green-400">
                            ${((parseFloat(stakeAmount) * selectedPool.apy) / 100).toFixed(2)}
                          </span>
                        </div>
                        <div className="flex justify-between text-sm">
                          <span className="text-gray-400">Monthly earnings</span>
                          <span className="font-bold">
                            ${((parseFloat(stakeAmount) * selectedPool.apy) / 100 / 12).toFixed(2)}
                          </span>
                        </div>
                        <div className="flex justify-between text-sm">
                          <span className="text-gray-400">Daily earnings</span>
                          <span className="font-bold">
                            ${((parseFloat(stakeAmount) * selectedPool.apy) / 100 / 365).toFixed(2)}
                          </span>
                        </div>
                      </div>
                    )}

                    <button 
                      onClick={handleStake}
                      disabled={!stakeAmount || parseFloat(stakeAmount) <= 0}
                      className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-4 px-6 rounded-xl hover:from-green-600 hover:to-emerald-600 transition disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-green-500/30"
                    >
                      Stake Now
                    </button>
                  </div>
                )}
              </div>

              {/* Info Sidebar */}
              <div className="space-y-6">
                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                  <h3 className="font-bold mb-4">How it Works</h3>
                  <ol className="space-y-4 text-sm text-gray-400">
                    <li className="flex gap-3">
                      <span className="flex-shrink-0 w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold">1</span>
                      <span>Choose a staking pool based on your risk tolerance</span>
                    </li>
                    <li className="flex gap-3">
                      <span className="flex-shrink-0 w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold">2</span>
                      <span>Enter the amount you want to stake</span>
                    </li>
                    <li className="flex gap-3">
                      <span className="flex-shrink-0 w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold">3</span>
                      <span>Earn passive income automatically</span>
                    </li>
                    <li className="flex gap-3">
                      <span className="flex-shrink-0 w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold">4</span>
                      <span>Withdraw anytime with no lock-up period</span>
                    </li>
                  </ol>
                </div>

                <div className="bg-gradient-to-br from-purple-600/20 to-fuchsia-600/20 border border-purple-500/30 rounded-2xl p-6">
                  <Sparkles className="w-8 h-8 text-purple-400 mb-3" />
                  <h3 className="font-bold mb-2">Premium Benefits</h3>
                  <p className="text-sm text-gray-400 mb-4">Upgrade to Premium for exclusive high-yield pools and enhanced returns</p>
                  <button className="w-full bg-gradient-to-r from-purple-500 to-fuchsia-500 text-white font-semibold py-3 px-4 rounded-xl hover:from-purple-600 hover:to-fuchsia-600 transition">
                    Upgrade Now
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* Card */}
        {activeTab === 'card' && (
          <div className="space-y-8">
            <div>
              <h1 className="text-3xl sm:text-4xl font-bold mb-2">Tria Card</h1>
              <p className="text-gray-400">Spend your crypto anywhere with Visa</p>
            </div>

            <div className="grid lg:grid-cols-2 gap-8">
              {/* Card Display */}
              <div className="space-y-6">
                <div className="relative">
                  <div className="absolute inset-0 bg-gradient-to-r from-purple-500 to-fuchsia-500 rounded-3xl blur-2xl opacity-30"></div>
                  <div className="relative bg-gradient-to-br from-gray-900 via-gray-800 to-black border border-gray-700 rounded-3xl p-8 shadow-2xl aspect-[1.586/1]">
                    <div className="h-full flex flex-col justify-between">
                      <div className="flex items-start justify-between">
                        <div className="w-14 h-14 bg-gradient-to-br from-violet-500 to-fuchsia-500 rounded-2xl flex items-center justify-center shadow-lg">
                          <Sparkles className="w-8 h-8" />
                        </div>
                        <div className="text-right">
                          <div className="text-xs text-gray-400 mb-1">Powered by</div>
                          <div className="text-2xl font-bold">VISA</div>
                        </div>
                      </div>

                      <div>
                        <div className="text-2xl font-mono tracking-widest mb-6">
                          •••• •••• •••• 4242
                        </div>
                        
                        <div className="flex justify-between items-end">
                          <div>
                            <div className="text-xs text-gray-400 mb-1">CARDHOLDER</div>
                            <div className="font-semibold text-lg">YOUR NAME</div>
                          </div>
                          <div className="text-right">
                            <div className="text-xs text-gray-400 mb-1">VALID THRU</div>
                            <div className="font-semibold">12/27</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <button className="bg-gray-900/50 border border-gray-800 hover:border-purple-500 rounded-xl p-4 transition">
                    <Lock className="w-6 h-6 text-purple-400 mb-2" />
                    <div className="text-sm font-semibold">Freeze Card</div>
                  </button>
                  <button className="bg-gray-900/50 border border-gray-800 hover:border-purple-500 rounded-xl p-4 transition">
                    <Eye className="w-6 h-6 text-purple-400 mb-2" />
                    <div className="text-sm font-semibold">View Details</div>
                  </button>
                </div>

                <div className="bg-gradient-to-r from-purple-600/20 to-fuchsia-600/20 border border-purple-500/30 rounded-2xl p-6">
                  <h3 className="font-bold mb-4">Card Spending</h3>
                  <div className="text-4xl font-bold mb-2">$1,234.56</div>
                  <div className="text-sm text-gray-400">This month</div>
                  
                  <div className="mt-6 space-y-3">
                    <div className="flex justify-between text-sm">
                      <span className="text-gray-400">Cashback earned</span>
                      <span className="font-semibold text-green-400">+$12.34</span>
                    </div>
                    <div className="flex justify-between text-sm">
                      <span className="text-gray-400">Transactions</span>
                      <span className="font-semibold">27</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Benefits & Info */}
              <div className="space-y-6">
                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                  <h2 className="text-xl font-bold mb-6">Card Benefits</h2>
                  <div className="space-y-5">
                    {[
                      { icon: Globe, title: 'Global Acceptance', desc: 'Use at 130M+ merchants in 150+ countries worldwide' },
                      { icon: TrendingUp, title: 'Cashback Rewards', desc: 'Earn up to 3% cashback on every purchase' },
                      { icon: Shield, title: 'Secure Payments', desc: 'Protected by Visa security and fraud prevention' },
                      { icon: Zap, title: 'Instant Conversion', desc: 'Crypto automatically converts to fiat at point of sale' },
                    ].map((benefit, idx) => {
                      const Icon = benefit.icon;
                      return (
                        <div key={idx} className="flex gap-4">
                          <div className="flex-shrink-0 w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center">
                            <Icon className="w-6 h-6 text-purple-400" />
                          </div>
                          <div>
                            <h3 className="font-semibold mb-1">{benefit.title}</h3>
                            <p className="text-sm text-gray-400">{benefit.desc}</p>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>

                <div className="bg-gradient-to-br from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-2xl p-6">
                  <h3 className="text-xl font-bold mb-4">Request Physical Card</h3>
                  <p className="text-gray-400 mb-6">Get a premium metal card delivered to your doorstep</p>
                  
                  <div className="space-y-3 mb-6">
                    <div className="flex items-center gap-2 text-sm">
                      <Check className="w-4 h-4 text-green-400" />
                      <span>Free worldwide shipping</span>
                    </div>
                    <div className="flex items-center gap-2 text-sm">
                      <Check className="w-4 h-4 text-green-400" />
                      <span>Premium metal design</span>
                    </div>
                    <div className="flex items-center gap-2 text-sm">
                      <Check className="w-4 h-4 text-green-400" />
                      <span>Arrives in 7-10 business days</span>
                    </div>
                  </div>
                  
                  <button 
                    onClick={() => addNotification('Physical card request submitted!')}
                    className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-3 px-6 rounded-xl hover:from-green-600 hover:to-emerald-600 transition shadow-lg"
                  >
                    Request Card
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* Trade */}
        {activeTab === 'trade' && (
          <div className="space-y-8">
            <div>
              <h1 className="text-3xl sm:text-4xl font-bold mb-2">Trade</h1>
              <p className="text-gray-400">Seamless cross-chain trading with BestPath AVS</p>
            </div>

            <div className="grid lg:grid-cols-3 gap-8">
              {/* Trading Interface */}
              <div className="lg:col-span-2 space-y-6">
                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-8">
                  <div className="space-y-6">
                    {/* From */}
                    <div>
                      <label className="block text-sm font-medium text-gray-400 mb-3">From</label>
                      <div className="bg-gray-800/50 border border-gray-700 rounded-2xl p-5">
                        <div className="flex items-center justify-between mb-4">
                          <select
                            value={selectedChainFrom}
                            onChange={(e) => setSelectedChainFrom(e.target.value)}
                            className="bg-gray-700 text-white px-4 py-2 rounded-xl outline-none font-semibold cursor-pointer hover:bg-gray-600 transition"
                          >
                            {chains.map(chain => (
                              <option key={chain.name} value={chain.name}>{chain.name}</option>
                            ))}
                          </select>
                          <input
                            type="number"
                            value={tradeFromAmount}
                            onChange={(e) => setTradeFromAmount(e.target.value)}
                            className="bg-transparent text-right text-2xl font-bold outline-none w-40"
                            placeholder="0.0"
                          />
                        </div>
                        <div className="flex justify-between text-sm text-gray-400">
                          <span>Balance: {chains.find(c => c.name === selectedChainFrom)?.balance} {chains.find(c => c.name === selectedChainFrom)?.symbol}</span>
                          <button 
                            onClick={() => setTradeFromAmount(chains.find(c => c.name === selectedChainFrom)?.balance.toString() || '')}
                            className="text-purple-400 hover:text-purple-300 font-medium"
                          >
                            Max
                          </button>
                        </div>
                      </div>
                    </div>

                    {/* Swap Button */}
                    <div className="flex justify-center">
                      <button 
                        onClick={() => {
                          const temp = selectedChainFrom;
                          setSelectedChainFrom(selectedChainTo);
                          setSelectedChainTo(temp);
                        }}
                        className="bg-gray-800 hover:bg-gray-700 p-3 rounded-xl transition-all hover:rotate-180 duration-300"
                      >
                        <ArrowRightLeft className="w-6 h-6" />
                      </button>
                    </div>

                    {/* To */}
                    <div>
                      <label className="block text-sm font-medium text-gray-400 mb-3">To</label>
                      <div className="bg-gray-800/50 border border-gray-700 rounded-2xl p-5">
                        <div className="flex items-center justify-between mb-4">
                          <select
                            value={selectedChainTo}
                            onChange={(e) => setSelectedChainTo(e.target.value)}
                            className="bg-gray-700 text-white px-4 py-2 rounded-xl outline-none font-semibold cursor-pointer hover:bg-gray-600 transition"
                          >
                            {chains.map(chain => (
                              <option key={chain.name} value={chain.name}>{chain.name}</option>
                            ))}
                          </select>
                          <input
                            type="number"
                            value={tradeToAmount}
                            readOnly
                            className="bg-transparent text-right text-2xl font-bold outline-none w-40 text-gray-400"
                            placeholder="0.0"
                          />
                        </div>
                        <div className="flex justify-between text-sm text-gray-400">
                          <span>Balance: {chains.find(c => c.name === selectedChainTo)?.balance} {chains.find(c => c.name === selectedChainTo)?.symbol}</span>
                        </div>
                      </div>
                    </div>

                    {/* Trade Info */}
                    {tradeFromAmount && parseFloat(tradeFromAmount) > 0 && (
                      <div className="bg-purple-600/10 border border-purple-500/30 rounded-2xl p-5 space-y-3">
                        <div className="flex items-center gap-2 text-purple-400 font-medium mb-3">
                          <Zap className="w-5 h-5" />
                          <span>BestPath Route Optimized</span>
                        </div>
                        <div className="space-y-2 text-sm">
                          <div className="flex justify-between">
                            <span className="text-gray-400">Rate</span>
                            <span className="font-semibold">1 {chains.find(c => c.name === selectedChainFrom)?.symbol} ≈ 1,234.56 {chains.find(c => c.name === selectedChainTo)?.symbol}</span>
                          </div>
                          <div className="flex justify-between">
                            <span className="text-gray-400">Network Fee</span>
                            <span className="font-semibold text-green-400">$0.00 (Free)</span>
                          </div>
                          <div className="flex justify-between">
                            <span className="text-gray-400">Est. Time</span>
                            <span className="font-semibold">~30 seconds</span>
                          </div>
                          <div className="flex justify-between">
                            <span className="text-gray-400">Slippage</span>
                            <span className="font-semibold">0.5%</span>
                          </div>
                        </div>
                      </div>
                    )}

                    <button 
                      onClick={handleTrade}
                      disabled={!tradeFromAmount || parseFloat(tradeFromAmount) <= 0}
                      className="w-full bg-gradient-to-r from-purple-600 to-fuchsia-600 text-white font-bold py-4 px-6 rounded-xl hover:from-purple-700 hover:to-fuchsia-700 transition disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-500/30"
                    >
                      {tradeFromAmount && parseFloat(tradeFromAmount) > 0 ? 'Execute Trade' : 'Enter Amount'}
                    </button>
                  </div>
                </div>

                {/* Recent Trades */}
                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                  <h3 className="font-bold mb-4">Recent Trades</h3>
                  <div className="space-y-3">
                    {[
                      { from: 'ETH', to: 'MATIC', amount: '1.5', time: '2 hours ago' },
                      { from: 'BTC', to: 'SOL', amount: '0.05', time: '5 hours ago' },
                      { from: 'MATIC', to: 'ARB', amount: '500', time: '1 day ago' },
                    ].map((trade, idx) => (
                      <div key={idx} className="flex items-center justify-between p-4 bg-gray-800/30 rounded-xl">
                        <div className="flex items-center gap-3">
                          <div className="flex items-center">
                            <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-xs font-bold">
                              {trade.from}
                            </div>
                            <ArrowRightLeft className="w-4 h-4 mx-2 text-gray-400" />
                            <div className="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-xs font-bold">
                              {trade.to}
                            </div>
                          </div>
                          <div>
                            <div className="font-semibold">{trade.amount} {trade.from}</div>
                            <div className="text-sm text-gray-400">{trade.time}</div>
                          </div>
                        </div>
                        <Check className="w-5 h-5 text-green-400" />
                      </div>
                    ))}
                  </div>
                </div>
              </div>

              {/* Info Sidebar */}
              <div className="space-y-6">
                <div className="bg-gradient-to-br from-purple-600/20 to-fuchsia-600/20 border border-purple-500/30 rounded-2xl p-6">
                  <Sparkles className="w-10 h-10 text-purple-400 mb-4" />
                  <h3 className="text-xl font-bold mb-3">BestPath AVS</h3>
                  <p className="text-gray-400 text-sm leading-relaxed mb-4">
                    Our AI-driven routing engine automatically finds the optimal path for your trade across multiple chains and liquidity sources
                  </p>
                  <div className="space-y-2">
                    {['Best price execution', 'Zero gas fees', 'Instant settlement', 'Multi-hop routing'].map((feature, idx) => (
                      <div key={idx} className="flex items-center gap-2 text-sm">
                        <Check className="w-4 h-4 text-purple-400" />
                        <span>{feature}</span>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-2xl p-6">
                  <h3 className="font-bold mb-4">Supported Networks</h3>
                  <div className="space-y-2">
                    {chains.map((chain, idx) => (
                      <div key={idx} className="flex items-center justify-between p-3 bg-gray-800/30 rounded-lg">
                        <div className="flex items-center gap-3">
                          <div className={`w-8 h-8 ${chain.color} rounded-lg`}></div>
                          <span className="font-medium">{chain.name}</span>
                        </div>
                        <div className="w-2 h-2 bg-green-400 rounded-full"></div>
                      </div>
                    ))}
                    <div className="text-center py-3">
                      <span className="text-sm text-purple-400 font-medium">+ 65 more chains</span>
                    </div>
                  </div>
                </div>

                <div className="bg-gradient-to-br from-blue-600/20 to-cyan-600/20 border border-blue-500/30 rounded-2xl p-6">
                  <h3 className="font-bold mb-2">Trade Volume</h3>
                  <div className="text-3xl font-bold mb-1">$847,293</div>
                  <div className="text-sm text-gray-400 mb-4">Last 30 days</div>
                  <div className="h-2 bg-gray-800 rounded-full overflow-hidden">
                    <div className="h-full w-3/4 bg-gradient-to-r from-blue-500 to-cyan-500"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}
      </main>

      {/* Modals */}
      {showAddFunds && (
        <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4">
          <div className="bg-gray-900 border border-gray-800 rounded-3xl p-8 max-w-md w-full">
            <div className="flex items-center justify-between mb-6">
              <h3 className="text-2xl font-bold">Add Funds</h3>
              <button onClick={() => setShowAddFunds(false)} className="p-2 hover:bg-gray-800 rounded-xl transition">
                <X className="w-6 h-6" />
              </button>
            </div>
            
            <div className="space-y-4 mb-6">
              {['Bank Transfer', 'Debit Card', 'Credit Card', 'Crypto Deposit'].map((method, idx) => (
                <button key={idx} className="w-full flex items-center justify-between p-4 bg-gray-800 hover:bg-gray-700 rounded-xl transition">
                  <span className="font-medium">{method}</span>
                  <ChevronRight className="w-5 h-5 text-gray-400" />
                </button>
              ))}
            </div>
            
            <button 
              onClick={handleAddFunds}
              className="w-full bg-gradient-to-r from-purple-600 to-fuchsia-600 text-white font-bold py-4 rounded-xl hover:from-purple-700 hover:to-fuchsia-700 transition"
            >
              Continue
            </button>
          </div>
        </div>
      )}

      {showSendModal && (
        <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4">
          <div className="bg-gray-900 border border-gray-800 rounded-3xl p-8 max-w-md w-full">
            <div className="flex items-center justify-between mb-6">
              <h3 className="text-2xl font-bold">Send Crypto</h3>
              <button onClick={() => setShowSendModal(false)} className="p-2 hover:bg-gray-800 rounded-xl transition">
                <X className="w-6 h-6" />
              </button>
            </div>
            
            <div className="space-y-4 mb-6">
              <div>
                <label className="block text-sm text-gray-400 mb-2">Recipient Address</label>
                <input 
                  type="text" 
                  placeholder="0x..." 
                  className="w-full bg-gray-800 border border-gray-700 px-4 py-3 rounded-xl outline-none focus:border-purple-500 transition"
                />
              </div>
              <div>
                <label className="block text-sm text-gray-400 mb-2">Amount</label>
                <input 
                  type="number" 
                  placeholder="0.00" 
                  className="w-full bg-gray-800 border border-gray-700 px-4 py-3 rounded-xl outline-none focus:border-purple-500 transition"
                />
              </div>
            </div>
            
            <button 
              onClick={handleSend}
              className="w-full bg-gradient-to-r from-purple-600 to-fuchsia-600 text-white font-bold py-4 rounded-xl hover:from-purple-700 hover:to-fuchsia-700 transition"
            >
              Send Now
            </button>
          </div>
        </div>
      )}

      {/* Footer */}
      <footer className="border-t border-gray-800/50 bg-black/30 backdrop-blur-xl mt-16">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 py-8">
          <div className="text-center">
            <p className="text-gray-400 text-sm mb-2">
              Demo simulation of Tria platform · Not affiliated with tria.so
            </p>
            <p className="text-gray-500 text-xs">
              Powered by BestPath AVS · Built for educational purposes
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}
