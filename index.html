<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Qur'an Digital</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #1e3c72;
        }

        .input-group select,
        .input-group input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-group select:focus,
        .input-group input:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 10px rgba(30, 60, 114, 0.2);
        }

        .btn {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.3);
        }

        .content-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            min-height: 400px;
        }

        .ayah-container {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .ayah-container:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .ayah-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .ayah-number {
            background: #1e3c72;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-right: 10px;
        }

        .surah-info {
            color: #666;
            font-size: 14px;
            margin-left: auto;
        }

        .arabic-text {
            font-size: 24px;
            line-height: 1.8;
            text-align: right;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            font-family: 'Traditional Arabic', 'Amiri', serif;
            direction: rtl;
        }

        .translation {
            font-size: 16px;
            line-height: 1.6;
            color: #444;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #1e3c72;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 18px;
            color: #666;
        }

        .error {
            background: #ffe6e6;
            color: #d63384;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #f5c6cb;
        }

        .surah-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .surah-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .surah-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #1e3c72;
        }

        .surah-card h3 {
            color: #1e3c72;
            margin-bottom: 8px;
            font-size: 18px;
        }

        .surah-card p {
            color: #666;
            font-size: 14px;
            margin: 4px 0;
        }

        @media (max-width: 768px) {
            .search-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üïå Al-Qur'an Digital</h1>
            <p>Mushaf Al-Qur'an lengkap dengan terjemahan Bahasa Indonesia</p>
        </div>

        <div class="search-section">
            <div class="search-grid">
                <div class="input-group">
                    <label for="surahSelect">Pilih Surat:</label>
                    <select id="surahSelect">
                        <option value="">-- Pilih Surat --</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="ayahInput">Nomor Ayat:</label>
                    <input type="number" id="ayahInput" min="1" placeholder="Masukkan nomor ayat">
                </div>
                <div class="input-group">
                    <label for="juzSelect">Pilih Juz:</label>
                    <select id="juzSelect">
                        <option value="">-- Pilih Juz --</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="pageInput">Halaman:</label>
                    <input type="number" id="pageInput" min="1" max="604" placeholder="1-604">
                </div>
            </div>
            <div style="text-align: center;">
                <button class="btn" onclick="searchAyah()">üîç Cari Ayat</button>
                <button class="btn" onclick="showAllSurahs()">üìã Daftar Semua Surat</button>
                <button class="btn" onclick="loadRandomAyah()">üé≤ Ayat Acak</button>
            </div>
        </div>

        <div class="content-section">
            <div id="content">
                <div class="loading">
                    <p>Selamat datang di Al-Qur'an Digital</p>
                    <p>Gunakan fitur pencarian di atas untuk membaca ayat-ayat Al-Qur'an</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let quranData = {};
        let surahList = [];
        
        // Load Quran data from API
        async function loadQuranData() {
            try {
                showLoading('Memuat data Al-Qur\'an...');
                
                // Load surah list
                const surahResponse = await fetch('https://api.quran.com/api/v4/chapters');
                const surahData = await surahResponse.json();
                surahList = surahData.chapters;
                
                populateSurahSelect();
                populateJuzSelect();
                
                document.getElementById('content').innerHTML = `
                    <div class="loading">
                        <h3>‚úÖ Data Al-Qur'an berhasil dimuat!</h3>
                        <p>Silakan gunakan fitur pencarian untuk membaca ayat-ayat Al-Qur'an</p>
                        <p>Total: ${surahList.length} surat tersedia</p>
                    </div>
                `;
                
            } catch (error) {
                showError('Gagal memuat data Al-Qur\'an. Pastikan koneksi internet Anda stabil.');
                console.error('Error loading Quran data:', error);
            }
        }
        
        function populateSurahSelect() {
            const select = document.getElementById('surahSelect');
            select.innerHTML = '<option value="">-- Pilih Surat --</option>';
            
            surahList.forEach(surah => {
                const option = document.createElement('option');
                option.value = surah.id;
                option.textContent = `${surah.id}. ${surah.name_simple} (${surah.translated_name.name})`;
                select.appendChild(option);
            });
        }
        
        function populateJuzSelect() {
            const select = document.getElementById('juzSelect');
            select.innerHTML = '<option value="">-- Pilih Juz --</option>';
            
            for (let i = 1; i <= 30; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `Juz ${i}`;
                select.appendChild(option);
            }
        }
        
        async function searchAyah() {
            const surahId = document.getElementById('surahSelect').value;
            const ayahNumber = document.getElementById('ayahInput').value;
            const juzNumber = document.getElementById('juzSelect').value;
            const pageNumber = document.getElementById('pageInput').value;
            
            if (!surahId && !juzNumber && !pageNumber) {
                showError('Silakan pilih surat, juz, atau halaman terlebih dahulu.');
                return;
            }
            
            try {
                showLoading('Mencari ayat...');
                
                let apiUrl = '';
                let displayTitle = '';
                
                if (surahId) {
                    const surah = surahList.find(s => s.id == surahId);
                    apiUrl = `https://api.quran.com/api/v4/verses/by_chapter/${surahId}?language=id&words=false&translations=33`;
                    displayTitle = `${surah.name_simple} (${surah.translated_name.name})`;
                    
                    if (ayahNumber) {
                        apiUrl += `&verse_key=${surahId}:${ayahNumber}`;
                        displayTitle += ` - Ayat ${ayahNumber}`;
                    }
                } else if (juzNumber) {
                    apiUrl = `https://api.quran.com/api/v4/verses/by_juz/${juzNumber}?language=id&words=false&translations=33`;
                    displayTitle = `Juz ${juzNumber}`;
                } else if (pageNumber) {
                    apiUrl = `https://api.quran.com/api/v4/verses/by_page/${pageNumber}?language=id&words=false&translations=33`;
                    displayTitle = `Halaman ${pageNumber}`;
                }
                
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data.verses && data.verses.length > 0) {
                    displayVerses(data.verses, displayTitle);
                } else {
                    showError('Ayat tidak ditemukan.');
                }
                
            } catch (error) {
                showError('Terjadi kesalahan saat mencari ayat.');
                console.error('Error searching ayah:', error);
            }
        }
        
        async function loadRandomAyah() {
            try {
                showLoading('Memuat ayat acak...');
                
                const randomSurah = Math.floor(Math.random() * 114) + 1;
                const surah = surahList.find(s => s.id === randomSurah);
                const randomAyah = Math.floor(Math.random() * surah.verses_count) + 1;
                
                const apiUrl = `https://api.quran.com/api/v4/verses/by_key/${randomSurah}:${randomAyah}?language=id&words=false&translations=33`;
                
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data.verse) {
                    displayVerses([data.verse], `Ayat Acak - ${surah.name_simple} (${surah.translated_name.name}) : ${randomAyah}`);
                } else {
                    showError('Gagal memuat ayat acak.');
                }
                
            } catch (error) {
                showError('Terjadi kesalahan saat memuat ayat acak.');
                console.error('Error loading random ayah:', error);
            }
        }
        
        function showAllSurahs() {
            let html = '<h2>üìã Daftar Semua Surat Al-Qur\'an</h2>';
            html += '<div class="surah-list">';
            
            surahList.forEach(surah => {
                html += `
                    <div class="surah-card" onclick="loadSurah(${surah.id})">
                        <h3>${surah.id}. ${surah.name_simple}</h3>
                        <p><strong>${surah.translated_name.name}</strong></p>
                        <p>Jumlah Ayat: ${surah.verses_count}</p>
                        <p>Diturunkan di: ${surah.revelation_place}</p>
                    </div>
                `;
            });
            
            html += '</div>';
            document.getElementById('content').innerHTML = html;
        }
        
        async function loadSurah(surahId) {
            try {
                showLoading('Memuat surat...');
                
                const surah = surahList.find(s => s.id === surahId);
                const apiUrl = `https://api.quran.com/api/v4/verses/by_chapter/${surahId}?language=id&words=false&translations=33`;
                
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data.verses && data.verses.length > 0) {
                    displayVerses(data.verses, `${surah.name_simple} (${surah.translated_name.name})`);
                } else {
                    showError('Gagal memuat surat.');
                }
                
            } catch (error) {
                showError('Terjadi kesalahan saat memuat surat.');
                console.error('Error loading surah:', error);
            }
        }
        
        function displayVerses(verses, title) {
            let html = `<h2>${title}</h2>`;
            
            verses.forEach(verse => {
                const translation = verse.translations && verse.translations[0] ? verse.translations[0].text : 'Terjemahan tidak tersedia';
                
                html += `
                    <div class="ayah-container">
                        <div class="ayah-header">
                            <div class="ayah-number">${verse.verse_key}</div>
                            <div class="surah-info">
                                Juz ${verse.juz_number} | Halaman ${verse.page_number} | Hizb ${verse.hizb_number}
                            </div>
                        </div>
                        <div class="arabic-text">${verse.text_uthmani}</div>
                        <div class="translation">${translation}</div>
                    </div>
                `;
            });
            
            document.getElementById('content').innerHTML = html;
        }
        
        function showLoading(message) {
            document.getElementById('content').innerHTML = `
                <div class="loading">
                    <p>‚è≥ ${message}</p>
                </div>
            `;
        }
        
        function showError(message) {
            document.getElementById('content').innerHTML = `
                <div class="error">
                    <strong>‚ùå Error:</strong> ${message}
                </div>
            `;
        }
        
        // Event listeners
        document.getElementById('surahSelect').addEventListener('change', function() {
            const ayahInput = document.getElementById('ayahInput');
            if (this.value) {
                const surah = surahList.find(s => s.id == this.value);
                ayahInput.max = surah.verses_count;
                ayahInput.placeholder = `1-${surah.verses_count}`;
            } else {
                ayahInput.max = '';
                ayahInput.placeholder = 'Masukkan nomor ayat';
            }
        });
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadQuranData();
        });
    </script>
</body>
</html>
